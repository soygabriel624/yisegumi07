<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>tkm, Boli <3333 </title>
<style>
    body {
        margin: 0;
        font-family: "Comic Sans MS", sans-serif;
        background: linear-gradient(135deg, #ff9a9e, #fad0c4);
        text-align: center;
        color: #fff;
        overflow: hidden;
    }

    h1 {
        margin-top: 20px;
        text-shadow: 2px 2px 4px #000;
    }

    #gameContainer {
        margin: 20px auto;
        width: 400px;
        height: 600px;
        background: #87cefa;
        border: 4px solid white;
        border-radius: 20px;
        position: relative;
        overflow: hidden;
    }

    #player {
        width: 40px;
        height: 40px;
        background: yellow;
        border-radius: 50%;
        position: absolute;
        left: 50px;
        top: 250px;
        box-shadow: 0 0 10px rgba(0,0,0,0.4);
    }

    .pipe {
        width: 70px;
        background: green;
        position: absolute;
        animation: movePipe 3s linear infinite;
    }

    @keyframes movePipe {
        from { right: -80px; }
        to { right: 480px; }
    }

    #score {
        font-size: 1.6rem;
        margin-bottom: 10px;
    }

    .btn {
        padding: 10px 25px;
        background: #ff5e8e;
        border: none;
        color: white;
        border-radius: 10px;
        font-size: 1.2rem;
        cursor: pointer;
        transition: 0.2s;
        margin: 5px;
    }

    .btn:hover {
        background: #ff2e6e;
    }
</style>
</head>
<body>

<h1>Feliz cum atrasado, Boli u3u</h1>
<p>Perdón por olvidarme de tu cumpleaños, como compensación te hice este juego, te quiero mushooo <3333 </p>
<p>Es un flappy bird de TEMU WPAJAJWJAS, para saltar haz click o toca la barra espaciadora</p>
<div id="score">Puntaje: 0</div>

<div id="gameContainer">
    <div id="player"></div>
</div>

<button class="btn" onclick="iniciar()">Iniciar</button>
<button class="btn" onclick="reiniciar()">Reiniciar</button>

<script>
    const container = document.getElementById("gameContainer");
    const player = document.getElementById("player");
    const scoreEl = document.getElementById("score");

    let juegoActivo = false;
    let gravedad = 2.0;
    let velocidadY = 0;
    let puntaje = 0;
    let pipes = [];
    let loopInterval;

    // Función principal del juego
    function gameLoop() {
        if (!juegoActivo) return;

        // Aplicar gravedad
        velocidadY += gravedad;
        player.style.top = (player.offsetTop + velocidadY) + "px";

        // Verificar colisiones y límites
        if (player.offsetTop <= 0 || player.offsetTop >= 560) {
            gameOver();
        }

        pipes.forEach(pipe => {
            let pipeRect = pipe.getBoundingClientRect();
            let playerRect = player.getBoundingClientRect();

            if (
                playerRect.left < pipeRect.right &&
                playerRect.right > pipeRect.left &&
                playerRect.top < pipeRect.bottom &&
                playerRect.bottom > pipeRect.top
            ) {
                gameOver();
            }

            // Si el pipe sale, sumar punto y eliminarlo
            if (pipe.offsetLeft < -80) {
                pipe.remove();
                pipes = pipes.filter(p => p !== pipe);
                puntaje++;
                scoreEl.textContent = "Puntaje: " + puntaje;
            }
        });
    }

    // Genera un par de tubos
    function crearPipes() {
        if (!juegoActivo) return;

        const gap = 180; // hueco entre tubos
        const altura = Math.floor(Math.random() * 300) + 50;

        const pipeTop = document.createElement("div");
        pipeTop.classList.add("pipe");
        pipeTop.style.height = altura + "px";
        pipeTop.style.top = "0";
        pipeTop.style.right = "-80px";

        const pipeBottom = document.createElement("div");
        pipeBottom.classList.add("pipe");
        pipeBottom.style.height = (600 - altura - gap) + "px";
        pipeBottom.style.bottom = "0";
        pipeBottom.style.right = "-80px";

        container.append(pipeTop, pipeBottom);
        pipes.push(pipeTop, pipeBottom);
    }

    // Permite saltar
    function saltar() {
        if (!juegoActivo) return;
        velocidadY = -17;
    }

    // Iniciar juego
    function iniciar() {
        if (juegoActivo) return;

        juegoActivo = true;
        puntaje = 0;
        velocidadY = 0;
        scoreEl.textContent = "Puntaje: 0";

        loopInterval = setInterval(gameLoop, 20);
        setInterval(crearPipes, 2000);
    }

    // Reiniciar juego
    function reiniciar() {
        location.reload();
    }

    // Fin del juego
    function gameOver() {
        juegoActivo = false;
        alert("XDDD que tonota, perdiste, tu puntaje fue de: " + puntaje + " puntos.");
        clearInterval(loopInterval);
    }

    // Controles
    document.addEventListener("keydown", e => {
        if (e.code === "Space") saltar();
    });

    container.addEventListener("click", () => {
        saltar();
    });
</script>

</body>
</html>
